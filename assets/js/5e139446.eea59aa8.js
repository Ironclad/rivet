"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3664],{5591:(e,t,n)=>{n.d(t,{xA:()=>c,yg:()=>m});var o=n(8527);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),l=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=l(e.components);return o.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},g=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),d=l(n),g=r,m=d["".concat(s,".").concat(g)]||d[g]||u[g]||a;return n?o.createElement(m,i(i({ref:t},c),{},{components:n})):o.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=g;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p[d]="string"==typeof e?e:r,i[1]=p;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}g.displayName="MDXCreateElement"},5477:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>p,toc:()=>l});var o=n(4465),r=(n(8527),n(5591));const a={sidebar_label:"02 - Interpolation & More Node Types"},i="Interpolation & More Node Types",p={unversionedId:"tutorial/interpolation-more-node-types",id:"tutorial/interpolation-more-node-types",title:"Interpolation & More Node Types",description:"In the sidebar you should see the graphs tab with a list of numbered folders with graphs. These are the graphs that are included in the tutorial project.",source:"@site/docs/tutorial/02-interpolation-more-node-types.md",sourceDirName:"tutorial",slug:"/tutorial/interpolation-more-node-types",permalink:"/docs/tutorial/interpolation-more-node-types",draft:!1,editUrl:"https://github.com/ironclad/rivet/tree/main/packages/docs/docs/tutorial/02-interpolation-more-node-types.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_label:"02 - Interpolation & More Node Types"},sidebar:"tutorial",previous:{title:"01 - Simple Graph",permalink:"/docs/tutorial/simple-graph"},next:{title:"03 - Matching & Conditionals",permalink:"/docs/tutorial/matching-conditionals"}},s={},l=[{value:"Setup",id:"setup",level:2},{value:"Initial Prompts and Combining Outputs",id:"initial-prompts-and-combining-outputs",level:2},{value:"User Input",id:"user-input",level:2},{value:"Additional System Prompt",id:"additional-system-prompt",level:2},{value:"Final Response",id:"final-response",level:2}],c={toc:l},d="wrapper";function u(e){let{components:t,...a}=e;return(0,r.yg)(d,(0,o.A)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"interpolation--more-node-types"},"Interpolation & More Node Types"),(0,r.yg)("p",null,"In the sidebar you should see the graphs tab with a list of numbered folders with graphs. These are the graphs that are included in the tutorial project."),(0,r.yg)("p",null,"Inside the ",(0,r.yg)("inlineCode",{parentName:"p"},"2. Interpolation")," folder you should see an ",(0,r.yg)("inlineCode",{parentName:"p"},"Interpolation")," graph. Click on the graph to open it."),(0,r.yg)("p",null,"You should see the following graph:"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Interpolation Graph",src:n(1018).A,width:"1812",height:"514"})),(0,r.yg)("p",null,"Try running this graph by clicking the ",(0,r.yg)("inlineCode",{parentName:"p"},"Run")," button. You will see the two ",(0,r.yg)("a",{parentName:"p",href:"/docs/node-reference/chat"},"Chat Nodes")," run in parallel. Then, you will get a user input prompt that looks something like this:"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"User Input Prompt",src:n(9385).A,width:"981",height:"524"})),(0,r.yg)("p",null,"Try entering the name of one of the contracts in the list and submitting. You should then see the final ",(0,r.yg)("a",{parentName:"p",href:"/docs/node-reference/chat"},"Chat Node")," start to run. Once it is complete, it should give you a template for that contract type you have chosen!"),(0,r.yg)("p",null,"Let's go over this graph piece by piece:"),(0,r.yg)("h2",{id:"setup"},"Setup"),(0,r.yg)("p",null,"First, we have one ",(0,r.yg)("a",{parentName:"p",href:"/docs/node-reference/text"},"Text Node")," as a system prompt, and two ",(0,r.yg)("a",{parentName:"p",href:"/docs/node-reference/prompt"},"Prompt Nodes")," to prompt GPT to generate text:"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Interpolation Graph",src:n(5468).A,width:"674",height:"893"})),(0,r.yg)("p",null,"The system prompt text is:"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"You are an AI contract template generator. Given a type of contract from the user, you will output a template that the user can then use to draft a contract using your template.")),(0,r.yg)("p",null,"The first prompt is:"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"Please give the user an introduction to yourself and ask what contract they would like a draft for.")),(0,r.yg)("p",null,"The second prompt is:"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"Provide a list of contract types you can generate templates for. A maximum of 10. Reply with only a list of contract types.")),(0,r.yg)("p",null,"The system prompt is connected to the ",(0,r.yg)("inlineCode",{parentName:"p"},"System Prompt")," port of all the ",(0,r.yg)("a",{parentName:"p",href:"/docs/node-reference/chat"},"Chat Nodes")," in the graph. The first prompt is connected to the ",(0,r.yg)("inlineCode",{parentName:"p"},"Prompt")," port of the first chat node, and the second prompt is connected to the ",(0,r.yg)("inlineCode",{parentName:"p"},"Prompt")," port of the second chat node."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"System Prompt Connection",src:n(413).A,width:"725",height:"487"})),(0,r.yg)("h2",{id:"initial-prompts-and-combining-outputs"},"Initial Prompts and Combining Outputs"),(0,r.yg)("p",null,"After each of the chats has (in parallel) generated its output (the first being an introduction, and asking the user what contract to generate, and the 2nd being a list of contracts it can generate), the two outputs are fed into a ",(0,r.yg)("a",{parentName:"p",href:"/docs/node-reference/text"},"Text Node")," that combines the two outputs into one string:"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"{{introduction}}"),(0,r.yg)("p",{parentName:"blockquote"},"Here are some contract types I can generate templates for:"),(0,r.yg)("p",{parentName:"blockquote"},"{{templates}}")),(0,r.yg)("p",null,"The text inside {{curly_braces}} is marked as a replacement for one of the input ports of the text node. The inputs to the text node are dynamic based on the text prompt inside the text node. In this case, we get two inputs, ",(0,r.yg)("inlineCode",{parentName:"p"},"introduction")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"templates"),", corresponding to the two {{curly_braces}} in the text prompt and the two previous chat nodes."),(0,r.yg)("h2",{id:"user-input"},"User Input"),(0,r.yg)("p",null,"Using the toggle at the bottom of the settings of the ",(0,r.yg)("a",{parentName:"p",href:"/docs/node-reference/user-input"},"User Input Node"),", we can set the user input's question to be dynamic! So, we pass the merged text into user input node's question port to ask the combined question for the user"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Toggle",src:n(1384).A,width:"189",height:"161"})),(0,r.yg)("h2",{id:"additional-system-prompt"},"Additional System Prompt"),(0,r.yg)("p",null,"The next thing we do is combine all these messages together using an ",(0,r.yg)("a",{parentName:"p",href:"/docs/node-reference/assemble-prompt"},"Assemble Prompt Node"),", and additionally append one more system prompt instructing the AI what to do next:"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Assemble Prompt",src:n(9316).A,width:"1027",height:"679"})),(0,r.yg)("p",null,"The prompt is a ",(0,r.yg)("a",{parentName:"p",href:"/docs/node-reference/prompt"},"Prompt Node")," set to type System with the following text:"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"The user has indicated that they want to generate this contract type: {{type}}. You must now output a template for this contract type. Only reply with a template.")),(0,r.yg)("p",null,"We pass the text the user entered for the user input node into the ",(0,r.yg)("inlineCode",{parentName:"p"},"type")," port of the system prompt."),(0,r.yg)("h2",{id:"final-response"},"Final Response"),(0,r.yg)("p",null,"Finally, we pass this list of messages into a final ",(0,r.yg)("a",{parentName:"p",href:"/docs/node-reference/chat"},"Chat Node")," to generate the final response, which should be a contract template!"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Final Response",src:n(9583).A,width:"304",height:"726"})))}u.isMDXComponent=!0},9316:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/02-interpolation-assemble-prompt-ae1de9c244122672819e6583ab0eaef3.png"},9583:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/02-interpolation-final-response-7d17a4e42e4ecff3a5b4af0aca29e302.png"},1018:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/02-interpolation-overview-5d2c8fdf1df042a5cd9d5f65f53675e2.png"},5468:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/02-interpolation-setup-6e48dcf135e866cb4b8daba93302744e.png"},413:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/02-interpolation-system-prompt-4bc879d95495fc67a1a8f7a5a69309c4.png"},1384:(e,t,n)=>{n.d(t,{A:()=>o});const o="data:image/png;base64,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"},9385:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/02-interpolation-user-input-5da8c4a91d0dc7c4cf32db9a7117d711.png"}}]);